(this.webpackJsonpface_blur=this.webpackJsonpface_blur||[]).push([[0],{109:function(e,t,n){e.exports=n(232)},119:function(e,t,n){},127:function(e,t){},129:function(e,t){},163:function(e,t){},164:function(e,t){},232:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(96),o=n.n(c),i=(n(58),n(97)),l=n(98),u=n(106),s=n(99),f=n(107),h=n(235),d=n(233),m=n(100),p=n.n(m),g=(n(119),n(10)),b=n.n(g),w=n(19),v=n(101),O=n(17),j=n(234),y=n(16);function E(){return x.apply(this,arguments)}function x(){return(x=Object(w.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/Face_Blur/models",e.next=3,y.h(t);case 3:return e.next=5,y.f(t);case 5:return e.next=7,y.g(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return L.apply(this,arguments)}function L(){return(L=Object(w.a)(b.a.mark((function e(t){var n,a,r,c,o,i,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:512,a=.5,r=new y.c({inputSize:n,scoreThreshold:a}),c=!0,e.next=6,y.e(t);case 6:return o=e.sent,e.next=9,y.d(o,r).withFaceLandmarks(c).withFaceDescriptors();case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=n(102);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={imageURL:null,fullDesc:null,detections:null,descriptors:null,match:null},I=Object(j.a)((function(){var e=Object(a.useState)(U({},C,{faceMatcher:null})),t=Object(O.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(O.a)(o,2),l=i[0],u=i[1],s=Object(a.useState)(!1),f=Object(O.a)(s,2),h=f[0],d=f[1],m=Object(a.useState)(null),p=Object(O.a)(m,2),g=p[0],v=p[1],j=Object(a.useState)(!1),y=Object(O.a)(j,2),x=y[0],L=y[1],S=Object(a.useRef)(null),I=Object(a.useRef)(null),F=Object(a.useRef)(null),P=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime);Object(a.useEffect)((function(){window.addEventListener("load",_,!1),window.addEventListener("resize",_,!1)}),[]),Object(a.useEffect)((function(){console.log(n),l&&B()}),[n.imageURL]),Object(a.useEffect)((function(){n.detections&&h&&N()}),[n.detections,h]),Object(a.useEffect)((function(){function e(){return(e=Object(w.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(r.a.createElement("span",null,"\ud559\uc2b5 \ubaa8\ub378\uc744 \ubd88\ub7ec\uc624\uace0 \uc788\uc2b5\ub2c8\ub2e4..\ud83c\udfc3\u200d\u2640\ufe0f",r.a.createElement("br",null),"\uc778\ud130\ub137 \ud658\uacbd\uc5d0 \ub530\ub77c \uc18d\ub3c4\uac00 \ub2e4\ub97c \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),e.next=3,E().then((function(){console.log("\ubaa8\ub378 \ub85c\ub4dc \uc644\ub8cc"),v(null),u(!0),B()}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}P&&function(){e.apply(this,arguments)}()}),[]);var B=function(){var e=Object(w.a)(b.a.mark((function e(){var t,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:n.imageURL,console.log("handleImage"),!t){e.next=5;break}return e.next=5,k(t).then((function(e){if(console.log(e),e){console.log(n);var t=U({},n);t.descriptors=e.map((function(e){return e.descriptor})),t.detections=e.map((function(e){return e.detection})),c(t),console.log(t)}}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(w.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleFile"),!S.current.files[0]){e.next=6;break}return e.next=4,c({imageURL:URL.createObjectURL(S.current.files[0]),loading:!0});case 4:d(!1),L(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=I.current,t=e.getContext("2d"),a=F.current,r=(n.imageURL,n.detections);n.match;e.width=a.width,e.height=a.height,console.log(a.naturalWidth),console.log(a.naturalHeight),_(),console.log(n),t.clearRect(0,0,e.width,e.height),t.filter="none",r&&(r.length>0?r.map((function(n,r){t.drawImage(a,0,0,e.width,e.height);var c=n.box.height,o=n.box.width,i=n.box._x+o/2,l=n.box._y+c/2;t.filter="blur(10px)",t.beginPath(),t.arc(i,l,c/2,0,2*Math.PI),t.clip(),t.drawImage(a,0,0,e.width,e.height)})):L(!0));var o=U({},n);o.loading=!1,c(o)},_=function(){console.log("resize");var e=I.current,t=e.width/e.height,n=window.innerHeight-160,a=n*t;a>window.innerWidth&&(n=(a=window.innerWidth)/t),e.style.width=a+"px",e.style.height=n+"px"},z=n.imageURL,W=(n.detections,n.match,["\u2728\uc5bc\uad74 \ube14\ub7ec \ucc98\ub9ac\u2728","\u2728FACE BLUR\u2728"]),A=["\u2b07\ufe0f \ube14\ub7ec \ucc98\ub9ac \uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc","\u2b07\ufe0f Download Blured Image"],T=["\ud83e\udd33 \uc5bc\uad74 \uc774\ubbf8\uc9c0 \uc62c\ub9ac\uae30","\ud83e\udd33 Upload Face Image"],H=Object(a.useState)("\u2728FACE BLUR\u2728"),J=Object(O.a)(H,2),M=J[0],$=J[1],q=Object(a.useState)("\u2b07\ufe0f Download Blured Image"),G=Object(O.a)(q,2),K=G[0],Q=G[1],V=Object(a.useState)("\ud83e\udd33 Upload Face Image"),X=Object(O.a)(V,2),Y=X[0],Z=X[1],ee=0;return Object(a.useEffect)((function(){setInterval((function(){W.length>ee&&($(W[ee]),Q(A[ee]),Z(T[ee]),++ee===W.length&&(ee=0))}),2e3)}),[]),r.a.createElement("div",{style:{backgroundColor:"#1a1a1a",height:"100vh",width:"100vw",margin:-8}},r.a.createElement("div",{id:"titleText"},M),r.a.createElement("div",{style:{height:"1rem"}}),g?r.a.createElement("div",{style:{color:"white",fontSize:"2rem"}},g):r.a.createElement("div",{className:"flexContainer"},r.a.createElement("button",{className:"buttonStyle"},r.a.createElement("label",{style:{cursor:"pointer"}},Y,r.a.createElement("input",{style:{display:"none"},ref:S,type:"file",onChange:D,accept:".jpg, .jpeg, .png"}))),r.a.createElement("button",{className:"buttonStyle",onClick:function(){!function(e,t){var n=document.createElement("a");n.download=t,n.href=e,n.click()}("data:"+I.current.toDataURL("image/jpeg"),"yourImage.jpeg")}},K)),r.a.createElement("div",{style:{height:"1rem"}}),!P&&r.a.createElement("div",{style:{color:"white"}},"\ube14\ub7ec \ucc98\ub9ac\uc5d0 \uc0ac\uc6a9\ud558\ub294 canvas \uc758 filter\uac00 \ud604\uc7ac \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c\ub294 \uc81c\uacf5\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",r.a.createElement("br",null),"\ud06c\ub86c\uc73c\ub85c \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc2dc\uaca0\uc5b4\uc694?",r.a.createElement("br",null),"The filter of canvas tag used to blur effect is not available in the current browser, can you try again with Chrome?"),!!x&&r.a.createElement("div",{style:{color:"white",fontSize:"2rem"}},"\ud83d\udd75\ufe0f\u200d\u2640\ufe0f \uc774\ubbf8\uc9c0\uc5d0\uc11c \uc5bc\uad74\uc744 \ucc3e\uc9c0 \ubabb\ud588\uc5b4\uc694. ",r.a.createElement("br",null),"\ud83d\udd75\ufe0f\u200d\u2640\ufe0f No face on the image."),r.a.createElement("canvas",{ref:I}),r.a.createElement("img",{src:z,ref:F,alt:"imageURL",style:{display:"none"},onLoad:function(){d(!0)}}),!0===n.loading?r.a.createElement("div",{className:"flexContainerCenter"},r.a.createElement("div",{style:{flex:1}},r.a.createElement(R.BarLoader,{color:"white",loading:!!n.loading}),r.a.createElement("div",{style:{height:20}}),r.a.createElement("span",{style:{color:"white"}},"\ub85c\ub529\uc911 \ud83c\udfc3\u200d\u2640\ufe0f"))):r.a.createElement(r.a.Fragment,null))})),F=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{history:p()({basename:"/Face_Blur"})},r.a.createElement("div",{className:"route"},r.a.createElement(d.a,{exact:!0,path:"/",component:I}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},58:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.639198ef.chunk.js.map